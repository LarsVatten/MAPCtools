% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export-ExploratoryAnalysis.R
\name{plot_binned_counts}
\alias{plot_binned_counts}
\title{Plot counts of a factor across binned numeric intervals}
\usage{
plot_binned_counts(
  df,
  time_var,
  group_var,
  bin_size = NULL,
  bins = NULL,
  labels = NULL,
  plot_title = NULL,
  x_lab = NULL,
  y_lab = "Count"
)
}
\arguments{
\item{df}{A data frame containing at least \code{time_var} and \code{group_var}.}

\item{time_var}{String name of the numeric variable to bin.}

\item{group_var}{String name of the discrete grouping variable.}

\item{bin_size}{Single number giving the desired bin width.  Bins will be
created from \code{floor(min(df[[time_var]]))} up to ceiling(max(...)), with
a final shorter bin if needed.  Ignored if \code{bins} is supplied.}

\item{bins}{Optional numeric vector of breakpoints to pass to \code{cut(..., breaks = bins)}.}

\item{labels}{Optional character vector of labels for the bins; if NULL, labels
are auto-generated by \code{cut()}.}

\item{plot_title}{Title for the plot.  Defaults to
"Count of \if{html}{\out{<\code{group_var}>}} by binned \if{html}{\out{<\code{time_var}>}}".}

\item{x_lab}{Label for the x-axis (bins).  Defaults to \code{time_var}.}

\item{y_lab}{Label for the y-axis.  Defaults to "Count".}
}
\value{
A ggplot2 object (bar chart).  Also (invisibly) returns the
underlying data.frame of counts as the \code{"data"} attribute.
}
\description{
Given a data frame, a numeric variable to bin (e.g. age, year, birth_year)
and a discrete (factor or character) grouping variable (e.g. education, race),
this function will:
\enumerate{
\item Create either equal-width bins of size \code{bin_size}, or use the provided
numeric vector \code{bins} as breakpoints;
\item Count the number of rows in each bin x group;
\item Return a ggplot2 bar chart (dodged) of those counts.
}
}
\examples{
df <- data.frame(
  age    = sample(25:85, 500, replace = TRUE),
  educ   = sample(c("HS","BA","MA","PhD"), 500, replace = TRUE)
)
# auto 10-year bins:
plot_binned_counts(df, "age", "educ", bin_size = 10)

# custom bins:
my_bins   <- c(25, 35, 50, 65, 85)
my_labels <- c("25-34", "35-49", "50-64", "65-84")
plot_binned_counts(df, "age", "educ", bins = my_bins, labels = my_labels,
                   plot_title = "Custom age bins by education")
}
